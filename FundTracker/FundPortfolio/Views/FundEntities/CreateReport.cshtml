@model IEnumerable<Common.Models.FundEntity>
@{
    ViewBag.Title = "Create Report";
}

@section scripts {
    @Styles.Render("~/Content/jquery-ui.css")
    @Scripts.Render("~/bundles/jqueryui")
}

<h1 class="page-header">@ViewBag.Title</h1>


@using (Html.BeginForm("report", "fundEntities", FormMethod.Post, new { @class = "indent-left" }))
{
    <fieldset>
        <ol>
            <li>
                <label>Funds (select up to 3):</label>
                <div class="checkbox-container">
                    @foreach (var item in Model)
                    {
                        <input type="checkbox" name="fund" value="@item.id">@item.name<br />
                    }
                </div>
            </li>
            <li>
                <label>Start Date:</label>
                <input type="text" name="start" />
            </li>
            <li>
                <label>End Date:</label>
                <input type="text" name="end" />
            </li>
            <li>
                <label>Create:</label>
                <div class="indent-left">
                    <input type="checkbox" name="graph" checked> Graph<br />
                    <input type="checkbox" name="table" checked> Table<br />
                </div>
            </li>
        </ol>
        <input type="hidden" name="fundIds"/>
        <input type="submit" value="Create Report" />
    </fieldset>
}


<script>
  $(function() {
      $('input[name="start"]').datepicker();
      $('input[name="end"]').datepicker();
  });

  $('input[type="submit"]').on('click', function () {
      var $checked = $('input[name="fund"]:checked')
      var out = "";
      for (var i = 0; i < $checked.length; i++) {
          out += $checked[i].value + ",";
      }
      out = out.substring(0, out.length - 1);
      $('input[name="fundIds"]').val(out);
      return true;
  })
</script>

